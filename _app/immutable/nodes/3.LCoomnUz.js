import{d as Pe,f as y,a as h,s as C}from"../chunks/a4iteXJt.js";import{B as ie,C as Le,f as de,D as ce,E as ne,F as k,G as Me,p as Se,t as G,k as t,a as je,e as Ee,s as v,c as l,$ as Ie,r,n as te,H as g,o as se,I as z,J as re}from"../chunks/BXTkSRxv.js";import{i as L}from"../chunks/Cuzyd57D.js";import{e as Ve,t as qe}from"../chunks/yBu_oirs.js";import{h as Ae,p as Be,a as Fe,c as le}from"../chunks/Cs772Klj.js";import{r as oe,u as Te}from"../chunks/Gmw3wVdV.js";import{s as De,C as Ge}from"../chunks/B6VqzyFz.js";import{s as ze,a as H}from"../chunks/DwZT0pW2.js";function He(e,o,m=o){var i=new WeakSet;ie(e,"input",async u=>{var d=u?e.defaultValue:e.value;if(d=J(e)?N(d):d,m(d),k!==null&&i.add(k),await Le(),d!==(d=o())){var P=e.selectionStart,x=e.selectionEnd,p=e.value.length;if(e.value=d??"",x!==null){var c=e.value.length;P===x&&x===p&&c>p?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=P,e.selectionEnd=Math.min(x,c))}}}),(ne&&e.defaultValue!==e.value||de(o)==null&&e.value)&&(m(J(e)?N(e.value):e.value),k!==null&&i.add(k)),ce(()=>{var u=o();if(e===document.activeElement){var d=Me??k;if(i.has(d))return}J(e)&&u===N(e.value)||e.type==="date"&&!u&&!e.value||u!==e.value&&(e.value=u??"")})}function Je(e,o,m=o){ie(e,"change",i=>{var u=i?e.defaultChecked:e.checked;m(u)}),(ne&&e.defaultChecked!==e.checked||de(o)==null)&&m(e.checked),ce(()=>{var i=o();e.checked=!!i})}function J(e){var o=e.type;return o==="number"||o==="range"}function N(e){return e===""?null:+e}var Ne=y('<div class="flex items-center gap-2 bg-slate-900 px-2 py-1 rounded-lg"><button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">←</button> <span class="text-xs font-mono text-slate-500"> </span> <button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">→</button></div>'),Oe=y('<div class="py-20 text-center text-slate-500 animate-pulse">Cargando base de datos de jugadores...</div>'),Qe=y('<div class="w-full aspect-[2/3] rounded-xl border border-slate-800 bg-slate-900/50 flex flex-col items-center justify-center grayscale opacity-40 hover:opacity-100 transition-opacity"><div class="text-4xl mb-2 text-slate-700">?</div> <div class="text-xs text-slate-600 font-bold uppercase"> </div></div>'),Re=y('<div class="relative group perspective"><!></div>'),We=y('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>'),Ke=y('<div class="py-20 text-center text-slate-500">No se encontraron cartas con ese criterio.</div>'),Ue=y('<div class="space-y-8"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 flex flex-col md:flex-row justify-between items-center gap-6"><div><h1 class="text-3xl font-bold font-serif text-white">Tu Álbum</h1> <p class="text-slate-400">Completa la colección de los 500 mejores.</p></div> <div class="flex items-center gap-8"><div class="text-center"><div class="text-3xl font-mono font-bold text-amber-400"> <span class="text-slate-500 text-lg"> </span></div> <div class="text-xs uppercase tracking-widest text-slate-500">Cartas</div></div> <div class="w-48 h-4 bg-slate-800 rounded-full overflow-hidden border border-white/10"><div class="h-full bg-gradient-to-r from-amber-600 to-yellow-400 transition-all duration-1000"></div></div> <div class="font-mono text-sm text-amber-400"> </div></div></div> <div class="flex flex-col md:flex-row justify-between gap-4"><input type="text" placeholder="Buscar jugador..." class="bg-slate-900 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50 w-full md:w-64"/> <div class="flex items-center gap-4"><label class="flex items-center gap-2 text-sm text-slate-300 cursor-pointer"><input type="checkbox" class="rounded bg-slate-800 border-white/10 text-amber-500 focus:ring-amber-500/50"/> Mostrar Faltantes</label> <!></div></div> <!> <!></div>');function la(e,o){Se(o,!0);const m=()=>H(Fe,"$allPlayers",d),i=()=>H(le,"$collectionIds",d),u=()=>H(Be,"$playersLoading",d),[d,P]=ze();let x=z(!0),p=z(""),c=z(1);const M=20;let S=g(()=>{let a=m();if(t(p)){const s=t(p).toLowerCase();a=a.filter(f=>f.name.toLowerCase().includes(s)||f.username.toLowerCase().includes(s))}return t(x)||(a=a.filter(s=>i().includes(s.id))),a}),ve=g(()=>t(S).slice((t(c)-1)*M,t(c)*M)),j=g(()=>Math.ceil(t(S).length/M)),O=g(()=>i().length),E=g(()=>m().length),Q=g(()=>t(E)>0?t(O)/t(E)*100:0);function fe(a){let s=10;a.rating>=2700?s=500:a.rating>=2660?s=250:a.rating>=2655?s=50:a.rating>=2650&&(s=25);const n=i().filter($=>$===a.id).length===1;let b=n?Math.floor(s*.25):s;const w=n?`⚠️ ÚLTIMA CARTA: Solo recibirás ${b} monedas (25% del valor). ¿Seguro que quieres vender a ${a.name}?`:`¿Vender a ${a.name} por ${b} monedas?`;confirm(w)&&(le.removeCard(a.id),Te.addCoins(b),qe.success(`Vendido ${a.name} por ${b} monedas.`))}var I=Ue();Ae("1dle9it",a=>{Ee(()=>{Ie.title="Colección - Grandmaster Legends"})});var V=l(I),R=v(l(V),2),q=l(R),W=l(q),K=l(W),U=v(K),ue=l(U);r(U),r(W),te(2),r(q);var A=v(q,2),me=l(A);r(A);var X=v(A,2),xe=l(X);r(X),r(R),r(V);var B=v(V,2),F=l(B);oe(F);var Y=v(F,2),T=l(Y),Z=l(T);oe(Z),te(),r(T);var be=v(T,2);{var _e=a=>{var s=Ne(),f=l(s);f.__click=()=>re(c,-1);var n=v(f,2),b=l(n);r(n);var w=v(n,2);w.__click=()=>re(c),r(s),G(()=>{f.disabled=t(c)===1,C(b,`${t(c)??""} / ${t(j)??""}`),w.disabled=t(c)===t(j)}),h(a,s)};L(be,a=>{t(j)>1&&a(_e)})}r(Y),r(B);var ee=v(B,2);{var ge=a=>{var s=Oe();h(a,s)},pe=a=>{var s=We();Ve(s,21,()=>t(ve),f=>f.id,(f,n)=>{const b=g(()=>i().includes(t(n).id)),w=g(()=>i().filter(_=>_===t(n).id).length);var $=Re(),we=l($);{var $e=_=>{Ge(_,{get player(){return t(n)},get count(){return t(w)},onClick:()=>fe(t(n))})},Ce=_=>{var D=Qe(),ae=v(l(D),2),ke=l(ae,!0);r(ae),r(D),G(()=>C(ke,t(n).name)),h(_,D)};L(we,_=>{t(b)?_($e):_(Ce,!1)})}r($),h(f,$)}),r(s),h(a,s)};L(ee,a=>{u()?a(ge):a(pe,!1)})}var he=v(ee,2);{var ye=a=>{var s=Ke();h(a,s)};L(he,a=>{t(S).length===0&&a(ye)})}r(I),G(a=>{C(K,`${t(O)??""} `),C(ue,`/ ${t(E)??""}`),De(me,`width: ${t(Q)??""}%`),C(xe,`${a??""}%`)},[()=>t(Q).toFixed(1)]),He(F,()=>t(p),a=>se(p,a)),Je(Z,()=>t(x),a=>se(x,a)),h(e,I),je(),P()}Pe(["click"]);export{la as component};
