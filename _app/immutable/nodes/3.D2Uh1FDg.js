import{d as Ce,f as g,a as b,s as w}from"../chunks/Bhm8GnSi.js";import{v as oe,w as Pe,f as ie,x as de,y as ce,z as $,A as Le,p as je,t as A,q as t,a as Se,e as Ee,s as c,c as l,$ as Me,r,n as ae,B as p,k as te,C as G,D as se}from"../chunks/CFNsvRdg.js";import{i as C}from"../chunks/BhUcyhkZ.js";import{e as Ve,t as Be}from"../chunks/BwE78W84.js";import{h as De,p as Ie,a as qe,c as re}from"../chunks/DPMi09uU.js";import{r as le,u as ze}from"../chunks/EQSNnms0.js";import{s as Fe,C as Ae}from"../chunks/B5w2SjC3.js";import{s as Ge,a as N}from"../chunks/CJByuM-o.js";function Ne(e,o,u=o){var v=new WeakSet;oe(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=O(e)?Q(i):i,u(i),$!==null&&v.add($),await Pe(),i!==(i=o())){var k=e.selectionStart,m=e.selectionEnd,_=e.value.length;if(e.value=i??"",m!==null){var d=e.value.length;k===m&&m===_&&d>_?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=k,e.selectionEnd=Math.min(m,d))}}}),(ce&&e.defaultValue!==e.value||ie(o)==null&&e.value)&&(u(O(e)?Q(e.value):e.value),$!==null&&v.add($)),de(()=>{var n=o();if(e===document.activeElement){var i=Le??$;if(v.has(i))return}O(e)&&n===Q(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Oe(e,o,u=o){oe(e,"change",v=>{var n=v?e.defaultChecked:e.checked;u(n)}),(ce&&e.defaultChecked!==e.checked||ie(o)==null)&&u(e.checked),de(()=>{var v=o();e.checked=!!v})}function O(e){var o=e.type;return o==="number"||o==="range"}function Q(e){return e===""?null:+e}var Qe=g('<div class="flex items-center gap-2 bg-slate-900 px-2 py-1 rounded-lg"><button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">←</button> <span class="text-xs font-mono text-slate-500"> </span> <button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">→</button></div>'),Te=g('<div class="py-20 text-center text-slate-500 animate-pulse">Cargando base de datos de jugadores...</div>'),We=g('<div class="w-full aspect-[2/3] rounded-xl border border-slate-800 bg-slate-900/50 flex flex-col items-center justify-center grayscale opacity-40 hover:opacity-100 transition-opacity"><div class="text-4xl mb-2 text-slate-700">?</div> <div class="text-xs text-slate-600 font-bold uppercase"> </div></div>'),He=g('<div class="relative group perspective"><!></div>'),Je=g('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>'),Ke=g('<div class="py-20 text-center text-slate-500">No se encontraron cartas con ese criterio.</div>'),Re=g('<div class="space-y-8"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 flex flex-col md:flex-row justify-between items-center gap-6"><div><h1 class="text-3xl font-bold font-serif text-white">Tu Álbum</h1> <p class="text-slate-400">Completa la colección de los 500 mejores.</p></div> <div class="flex items-center gap-8"><div class="text-center"><div class="text-3xl font-mono font-bold text-amber-400"> <span class="text-slate-500 text-lg"> </span></div> <div class="text-xs uppercase tracking-widest text-slate-500">Cartas</div></div> <div class="w-48 h-4 bg-slate-800 rounded-full overflow-hidden border border-white/10"><div class="h-full bg-gradient-to-r from-amber-600 to-yellow-400 transition-all duration-1000"></div></div> <div class="font-mono text-sm text-amber-400"> </div></div></div> <div class="flex flex-col md:flex-row justify-between gap-4"><input type="text" placeholder="Buscar jugador..." class="bg-slate-900 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50 w-full md:w-64"/> <div class="flex items-center gap-4"><label class="flex items-center gap-2 text-sm text-slate-300 cursor-pointer"><input type="checkbox" class="rounded bg-slate-800 border-white/10 text-amber-500 focus:ring-amber-500/50"/> Mostrar Faltantes</label> <!></div></div> <!> <!></div>');function ra(e,o){je(o,!0);const u=()=>N(qe,"$allPlayers",i),v=()=>N(re,"$collectionIds",i),n=()=>N(Ie,"$playersLoading",i),[i,k]=Ge();let m=G(!0),_=G(""),d=G(1);const P=20;let L=p(()=>{let a=u();if(t(_)){const s=t(_).toLowerCase();a=a.filter(f=>f.name.toLowerCase().includes(s)||f.username.toLowerCase().includes(s))}return t(m)||(a=a.filter(s=>v().includes(s.id))),a}),ve=p(()=>t(L).slice((t(d)-1)*P,t(d)*P)),j=p(()=>Math.ceil(t(L).length/P)),T=p(()=>v().length),S=p(()=>u().length),W=p(()=>t(S)>0?t(T)/t(S)*100:0);function ne(a){let s=20;a.rating>=2700?s=1e3:a.rating>=2660?s=500:a.rating>=2655?s=100:a.rating>=2650&&(s=50),confirm(`¿Vender a ${a.name} por ${s} monedas? (Desaparecerá de tu colección)`)&&(re.removeCard(a.id),ze.addCoins(s),Be.success(`Vendido ${a.name} por ${s} monedas.`))}var E=Re();De("1dle9it",a=>{Ee(()=>{Me.title="Colección - Grandmaster Legends"})});var M=l(E),H=c(l(M),2),V=l(H),J=l(V),K=l(J),R=c(K),fe=l(R);r(R),r(J),ae(2),r(V);var B=c(V,2),ue=l(B);r(B);var U=c(B,2),me=l(U);r(U),r(H),r(M);var D=c(M,2),I=l(D);le(I);var X=c(I,2),q=l(X),Y=l(q);le(Y),ae(),r(q);var xe=c(q,2);{var _e=a=>{var s=Qe(),f=l(s);f.__click=()=>se(d,-1);var x=c(f,2),z=l(x);r(x);var h=c(x,2);h.__click=()=>se(d),r(s),A(()=>{f.disabled=t(d)===1,w(z,`${t(d)??""} / ${t(j)??""}`),h.disabled=t(d)===t(j)}),b(a,s)};C(xe,a=>{t(j)>1&&a(_e)})}r(X),r(D);var Z=c(D,2);{var be=a=>{var s=Te();b(a,s)},pe=a=>{var s=Je();Ve(s,21,()=>t(ve),f=>f.id,(f,x)=>{const z=p(()=>v().includes(t(x).id));var h=He(),ye=l(h);{var we=y=>{Ae(y,{get player(){return t(x)},onClick:()=>ne(t(x))})},$e=y=>{var F=We(),ee=c(l(F),2),ke=l(ee,!0);r(ee),r(F),A(()=>w(ke,t(x).name)),b(y,F)};C(ye,y=>{t(z)?y(we):y($e,!1)})}r(h),b(f,h)}),r(s),b(a,s)};C(Z,a=>{n()?a(be):a(pe,!1)})}var ge=c(Z,2);{var he=a=>{var s=Ke();b(a,s)};C(ge,a=>{t(L).length===0&&a(he)})}r(E),A(a=>{w(K,`${t(T)??""} `),w(fe,`/ ${t(S)??""}`),Fe(ue,`width: ${t(W)??""}%`),w(me,`${a??""}%`)},[()=>t(W).toFixed(1)]),Ne(I,()=>t(_),a=>te(_,a)),Oe(Y,()=>t(m),a=>te(m,a)),b(e,E),Se(),k()}Ce(["click"]);export{ra as component};
