import{d as Le,f as g,a as b,s as w}from"../chunks/Bhm8GnSi.js";import{v as ie,w as je,f as de,x as ce,y as ve,z as $,A as Se,p as Ee,t as G,q as t,a as Me,e as Ve,s as d,c as l,$ as Be,r,n as te,B as p,k as se,C as N,D as re}from"../chunks/CFNsvRdg.js";import{i as C}from"../chunks/BhUcyhkZ.js";import{e as De,t as Ie}from"../chunks/BwE78W84.js";import{h as qe,p as ze,a as Fe,c as le}from"../chunks/DPMi09uU.js";import{r as oe,u as Ae}from"../chunks/EQSNnms0.js";import{s as Ge,C as Ne}from"../chunks/BYi-S9q8.js";import{s as Oe,a as O}from"../chunks/CJByuM-o.js";function Qe(e,o,x=o){var v=new WeakSet;ie(e,"input",async n=>{var i=n?e.defaultValue:e.value;if(i=Q(e)?T(i):i,x(i),$!==null&&v.add($),await je(),i!==(i=o())){var k=e.selectionStart,m=e.selectionEnd,_=e.value.length;if(e.value=i??"",m!==null){var c=e.value.length;k===m&&m===_&&c>_?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=k,e.selectionEnd=Math.min(m,c))}}}),(ve&&e.defaultValue!==e.value||de(o)==null&&e.value)&&(x(Q(e)?T(e.value):e.value),$!==null&&v.add($)),ce(()=>{var n=o();if(e===document.activeElement){var i=Se??$;if(v.has(i))return}Q(e)&&n===T(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Te(e,o,x=o){ie(e,"change",v=>{var n=v?e.defaultChecked:e.checked;x(n)}),(ve&&e.defaultChecked!==e.checked||de(o)==null)&&x(e.checked),ce(()=>{var v=o();e.checked=!!v})}function Q(e){var o=e.type;return o==="number"||o==="range"}function T(e){return e===""?null:+e}var We=g('<div class="flex items-center gap-2 bg-slate-900 px-2 py-1 rounded-lg"><button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">←</button> <span class="text-xs font-mono text-slate-500"> </span> <button class="px-2 py-1 text-slate-400 hover:text-white disabled:opacity-30">→</button></div>'),He=g('<div class="py-20 text-center text-slate-500 animate-pulse">Cargando base de datos de jugadores...</div>'),Je=g('<div class="w-full aspect-[2/3] rounded-xl border border-slate-800 bg-slate-900/50 flex flex-col items-center justify-center grayscale opacity-40 hover:opacity-100 transition-opacity"><div class="text-4xl mb-2 text-slate-700">?</div> <div class="text-xs text-slate-600 font-bold uppercase"> </div> <div class="text-[10px] text-slate-700 font-mono mt-1"> </div></div>'),Ke=g('<div class="relative group perspective"><!></div>'),Re=g('<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>'),Ue=g('<div class="py-20 text-center text-slate-500">No se encontraron cartas con ese criterio.</div>'),Xe=g('<div class="space-y-8"><div class="bg-slate-900/50 p-6 rounded-2xl border border-white/5 flex flex-col md:flex-row justify-between items-center gap-6"><div><h1 class="text-3xl font-bold font-serif text-white">Tu Álbum</h1> <p class="text-slate-400">Completa la colección de los 500 mejores.</p></div> <div class="flex items-center gap-8"><div class="text-center"><div class="text-3xl font-mono font-bold text-amber-400"> <span class="text-slate-500 text-lg"> </span></div> <div class="text-xs uppercase tracking-widest text-slate-500">Cartas</div></div> <div class="w-48 h-4 bg-slate-800 rounded-full overflow-hidden border border-white/10"><div class="h-full bg-gradient-to-r from-amber-600 to-yellow-400 transition-all duration-1000"></div></div> <div class="font-mono text-sm text-amber-400"> </div></div></div> <div class="flex flex-col md:flex-row justify-between gap-4"><input type="text" placeholder="Buscar jugador..." class="bg-slate-900 border border-white/10 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-amber-500/50 w-full md:w-64"/> <div class="flex items-center gap-4"><label class="flex items-center gap-2 text-sm text-slate-300 cursor-pointer"><input type="checkbox" class="rounded bg-slate-800 border-white/10 text-amber-500 focus:ring-amber-500/50"/> Mostrar Faltantes</label> <!></div></div> <!> <!></div>');function oa(e,o){Ee(o,!0);const x=()=>O(Fe,"$allPlayers",i),v=()=>O(le,"$collectionIds",i),n=()=>O(ze,"$playersLoading",i),[i,k]=Oe();let m=N(!0),_=N(""),c=N(1);const P=20;let L=p(()=>{let a=x();if(t(_)){const s=t(_).toLowerCase();a=a.filter(f=>f.name.toLowerCase().includes(s)||f.username.toLowerCase().includes(s))}return t(m)||(a=a.filter(s=>v().includes(s.id))),a}),ne=p(()=>t(L).slice((t(c)-1)*P,t(c)*P)),j=p(()=>Math.ceil(t(L).length/P)),W=p(()=>v().length),S=p(()=>x().length),H=p(()=>t(S)>0?t(W)/t(S)*100:0);function fe(a){let s=20;a.rating>=2750?s=500:a.rating>=2650?s=100:a.rating>=2550&&(s=50),confirm(`¿Vender a ${a.name} por ${s} monedas? (Desaparecerá de tu colección)`)&&(le.removeCard(a.id),Ae.addCoins(s),Ie.success(`Vendido ${a.name} por ${s} monedas.`))}var E=Xe();qe("1dle9it",a=>{Ve(()=>{Be.title="Colección - Grandmaster Legends"})});var M=l(E),J=d(l(M),2),V=l(J),K=l(V),R=l(K),U=d(R),ue=l(U);r(U),r(K),te(2),r(V);var B=d(V,2),xe=l(B);r(B);var X=d(B,2),me=l(X);r(X),r(J),r(M);var D=d(M,2),I=l(D);oe(I);var Y=d(I,2),q=l(Y),Z=l(q);oe(Z),te(),r(q);var _e=d(q,2);{var be=a=>{var s=We(),f=l(s);f.__click=()=>re(c,-1);var u=d(f,2),z=l(u);r(u);var h=d(u,2);h.__click=()=>re(c),r(s),G(()=>{f.disabled=t(c)===1,w(z,`${t(c)??""} / ${t(j)??""}`),h.disabled=t(c)===t(j)}),b(a,s)};C(_e,a=>{t(j)>1&&a(be)})}r(Y),r(D);var ee=d(D,2);{var pe=a=>{var s=He();b(a,s)},ge=a=>{var s=Re();De(s,21,()=>t(ne),f=>f.id,(f,u)=>{const z=p(()=>v().includes(t(u).id));var h=Ke(),we=l(h);{var $e=y=>{Ne(y,{get player(){return t(u)},onClick:()=>fe(t(u))})},ke=y=>{var F=Je(),A=d(l(F),2),Ce=l(A,!0);r(A);var ae=d(A,2),Pe=l(ae);r(ae),r(F),G(()=>{w(Ce,t(u).name),w(Pe,`#${t(u).position??""}`)}),b(y,F)};C(we,y=>{t(z)?y($e):y(ke,!1)})}r(h),b(f,h)}),r(s),b(a,s)};C(ee,a=>{n()?a(pe):a(ge,!1)})}var he=d(ee,2);{var ye=a=>{var s=Ue();b(a,s)};C(he,a=>{t(L).length===0&&a(ye)})}r(E),G(a=>{w(R,`${t(W)??""} `),w(ue,`/ ${t(S)??""}`),Ge(xe,`width: ${t(H)??""}%`),w(me,`${a??""}%`)},[()=>t(H).toFixed(1)]),Qe(I,()=>t(_),a=>se(_,a)),Te(Z,()=>t(m),a=>se(m,a)),b(e,E),Me(),k()}Le(["click"]);export{oa as component};
