import{d as Oe,f as h,a as f,c as Qe,s as v}from"../chunks/B51cwJvt.js";import{i as We}from"../chunks/DB0iArIQ.js";import{p as De,g as fe,h as He,j as de,t as J,a as Ke,k as e,m as U,e as Xe,s as o,c as s,o as j,$ as Ye,r as t,f as n,n as ae,q as Ze,v as et}from"../chunks/I7kW3HN8.js";import{i as E}from"../chunks/BmRqm3E_.js";import{e as ge}from"../chunks/De7vBO-T.js";import{h as tt}from"../chunks/BzyVKUbO.js";import{r as at,s as I}from"../chunks/Qgj7xOVc.js";import{M as st,s as _e,t as _}from"../chunks/D8F7ty4a.js";import{b as rt,c as ot}from"../chunks/sfh6b0eg.js";import{s as it,a as se}from"../chunks/DjaJJ-dN.js";import{c as ce,t as nt,a as he}from"../chunks/CgE-LtsO.js";import{o as lt,a as we,l as dt,u as ct}from"../chunks/iLhF7f-Y.js";var vt=h('<span class="animate-spin">ğŸ”„</span> Sincronizando...',1),ut=h("<span>ğŸ”„</span> Sincronizar Puntos Reales",1),mt=h('<div class="mb-6 flex justify-end"><button class="btn-primary text-sm py-2 px-4 shadow-lg shadow-primary/20 flex items-center gap-2"><!></button></div>'),bt=h('<div class="text-center py-16 border-2 border-dashed border-slate-700/50 rounded-xl bg-slate-900/30"><div class="text-5xl mb-4 text-slate-600">â™”</div> <p class="mb-2 text-slate-400 font-medium">Sin jugadores en la alineaciÃ³n</p> <p class="text-sm text-slate-500">AÃ±ade jugadores desde tu roster para empezar a puntuar</p></div>'),pt=h('<div class="absolute -top-2 -right-2 px-3 py-1 rounded-full text-xs font-bold z-10 shadow-lg bg-gradient-to-r from-amber-500 to-yellow-600 text-slate-900 border border-yellow-400">â˜… CAPITÃN</div>'),xt=h('<div class="relative group bg-slate-800/40 rounded-xl border border-white/5 p-4 hover:border-primary/30 transition-all duration-300 hover:shadow-lg hover:shadow-primary/5"><!> <div class="flex items-start gap-4 mb-4"><div class="relative"><img class="w-14 h-14 rounded-full object-cover border-2 border-white/10 group-hover:border-primary transition-colors"/> <div class="absolute -bottom-1 -right-1 bg-slate-900 text-[10px] font-bold px-1.5 py-0.5 rounded border border-white/10 text-slate-300"> </div></div> <div class="overflow-hidden"><h3 class="font-bold text-white leading-tight truncate pr-2 group-hover:text-primary transition-colors"> </h3> <div class="text-xs text-slate-400 mt-1 truncate"> </div></div></div> <div class="grid grid-cols-2 gap-3 mb-4 text-sm"><div class="bg-slate-900/50 p-2.5 rounded-lg border border-white/5"><div class="text-[10px] text-slate-500 uppercase tracking-wider mb-0.5">Valor</div> <div class="text-white font-mono font-medium"> </div></div> <button type="button" class="bg-amber-500/5 p-2.5 rounded-lg cursor-pointer hover:bg-amber-500/10 transition-colors text-left border border-amber-500/10 group/clause"><div class="text-[10px] text-amber-500/70 uppercase tracking-wider mb-0.5">ClÃ¡usula</div> <div class="text-amber-400 font-mono font-medium group-hover/clause:text-amber-300 transition-colors"> <span class="text-xs">âœ</span></div></button></div> <div class="flex gap-2"><button> </button> <button class="px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wider bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 border border-red-500/20 transition-colors">Banquillo</button></div></div>'),ft=h('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),gt=h('<a href="/Grandmaster-Fantasy/market" class="btn-primary inline-flex items-center gap-2"><span>+</span> Ir al Mercado</a>'),_t=h('<div class="text-center py-12 bg-slate-900/30 rounded-xl"><p class="text-slate-400 mb-4"> </p> <!></div>'),ht=h('<div class="bg-slate-900/50 rounded-lg p-4 border border-white/5 hover:border-white/10 transition-colors"><div class="flex justify-between items-start mb-3"><div><h3 class="font-bold text-white text-sm truncate max-w-[120px]"> </h3> <div class="text-xs text-slate-500 truncate max-w-[120px]"> </div></div> <div class="text-xs bg-slate-800 px-2 py-1 rounded text-slate-300 border border-white/5 font-mono"> </div></div> <div class="flex justify-between items-center mb-4 text-xs bg-slate-950/30 p-2 rounded"><span class="text-slate-500 uppercase tracking-wider">ClÃ¡usula</span> <button class="text-amber-400 font-mono font-medium hover:text-amber-300 hover:underline"> </button></div> <div class="flex gap-2"><button class="flex-1 bg-primary text-slate-900 font-bold text-xs py-2 rounded hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed transition-all">Alinear</button> <button class="px-3 bg-red-500/10 text-red-400 font-bold text-xs py-2 rounded border border-red-500/20 hover:bg-red-500/20 transition-all">Vender</button></div></div>'),wt=h('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"></div>'),$t=h(`<div class="text-center mb-8"><div class="relative inline-block mb-4"><img class="w-24 h-24 rounded-full border-4 border-amber-500/20 shadow-xl"/> <div class="absolute bottom-0 right-0 bg-slate-900 text-amber-500 text-lg p-1.5 rounded-full border border-amber-500/30">ğŸ›¡ï¸</div></div> <h3 class="text-2xl font-bold font-serif text-white"> </h3> <p class="text-slate-400 mt-1">ClÃ¡usula actual: <span class="text-white font-mono"> </span></p></div> <div class="space-y-6"><div class="bg-slate-800/50 p-6 rounded-xl border border-white/5"><label for="clause-range" class="block text-sm font-medium text-slate-300 mb-4">Nueva ClÃ¡usula (M)</label> <div class="flex items-center gap-4 mb-4"><span class="font-mono text-slate-500 text-xs"> </span> <input id="clause-range" type="range" class="flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-amber-500 hover:accent-amber-400"/> <span class="font-mono text-slate-500 text-xs"> </span></div> <div class="text-center"><span class="text-4xl font-bold font-mono text-amber-400 tracking-tight"> </span></div></div> <div class="bg-slate-900/50 p-4 rounded-lg flex justify-between items-center text-sm border border-white/5"><span class="text-slate-400">Coste de la operaciÃ³n (10%)</span> <span> </span></div> <div class="text-xs text-center text-slate-500 px-4">Al blindar a este jugador, reduces la probabilidad de que otros
                equipos paguen su clÃ¡usula.</div> <button class="w-full btn-primary py-3.5 text-base shadow-lg shadow-amber-500/10">Confirmar Blindaje</button></div>`,1),kt=h('<div class="space-y-8"><div><h1 class="text-3xl font-bold font-serif text-white mb-2">Mi Equipo</h1> <p class="text-sm text-slate-400">Gestiona tu plantilla, alineaciÃ³n y clÃ¡usulas de rescisiÃ³n</p></div> <div class="card p-6"><h2 class="text-xl font-bold font-serif text-white mb-6 flex items-center gap-3"><span class="text-2xl">â™Ÿ</span> AlineaciÃ³n Activa <span class="text-sm font-sans font-normal text-slate-400 ml-2"> </span></h2> <!> <!></div> <div class="mt-12"><h2 class="text-xl font-bold font-serif text-white mb-6 flex items-center gap-3 px-1"><span class="text-2xl text-slate-500">ğŸ‘¥</span> Banquillo <span class="text-sm font-sans font-normal text-slate-400 ml-2"> </span></h2> <!></div></div> <!>',1);function Bt($e,ke){De(ke,!1);const L=()=>se(nt,"$teamPlayers",H),C=()=>se(lt,"$ownedPlayers",H),N=()=>se(ce,"$currentTeam",H),R=()=>se(he,"$captain",H),[H,Ce]=it(),K=U(),O=U();let X=U(!1),l=U(null),y=U(0),Y=U(!1);async function Pe(){var c,r,b,u,d,m,w,$;if(L().length===0)return;j(Y,!0);let a=0,i=0;try{for(const p of L()){const T=await dt.getRecentGames(p.username,5);let P=0;for(const x of T){const k=((u=(b=(r=(c=x.players)==null?void 0:c.white)==null?void 0:r.user)==null?void 0:b.name)==null?void 0:u.toLowerCase())===p.username.toLowerCase(),M=(($=(w=(m=(d=x.players)==null?void 0:d.black)==null?void 0:m.user)==null?void 0:w.name)==null?void 0:$.toLowerCase())===p.username.toLowerCase();!k&&!M||(x.winner?x.winner==="white"&&k||x.winner==="black"&&M?P+=3:P+=0:P+=1,i++)}a+=P}i>0?(ct.addPoints(a),a>0?(_.success(`Â¡SincronizaciÃ³n completada! ${i} partidas encontradas. +${a} Puntos.`),ot()):_.info(`SincronizaciÃ³n completada. ${i} partidas, pero 0 puntos obtenidos.`)):_.info("Tus jugadores no han jugado partidas puntuadas recientemente.")}catch(p){_.error("Error al sincronizar con Lichess."),console.error(p)}finally{j(Y,!1)}}function ve(a){a&&(j(l,a),j(y,a.clause),j(X,!0))}function ye(){if(e(l)&&e(y)>e(l).clause){const a=we.increaseClause(e(l).id,e(y));a.success?(_.success(a.message),j(X,!1)):_.error(a.message)}}function je(a){const i=ce.addToTeam(a);i.success?_.success(i.message):_.error(i.message)}function Te(a){ce.removeFromTeam(a),_.success("Jugador eliminado del equipo")}function Me(a){if(confirm(`Â¿Vender a ${a.name}? RecibirÃ¡s ${(a.price*.8/1e6).toFixed(0)}M`)){const i=we.sellPlayer(a.id);i.success?_.success(i.message):_.error(i.message)}}function qe(a){const i=he.setCaptain(R()===a?null:a);i.success?_.success(i.message):_.error(i.message)}function B(a){return`${(a/1e6).toFixed(0)}M`}fe(()=>(C(),N()),()=>{j(K,C().filter(a=>!N().includes(a.id)))}),fe(()=>(e(l),e(y)),()=>{j(O,e(l)&&e(y)>e(l).clause?Math.floor((e(y)-e(l).clause)*.1):0)}),He(),We();var ue=kt();tt("1t76j9n",a=>{Xe(()=>{Ye.title="Mi Equipo - Grandmaster Fantasy"})});var re=de(ue),oe=o(s(re),2),ie=s(oe),me=o(s(ie),2),ze=s(me);t(me),t(ie);var be=o(ie,2);{var Ae=a=>{var i=mt(),c=s(i);c.__click=Pe;var r=s(c);{var b=d=>{var m=vt();ae(),f(d,m)},u=d=>{var m=ut();ae(),f(d,m)};E(r,d=>{e(Y)?d(b):d(u,!1)})}t(c),t(i),J(()=>c.disabled=e(Y)),f(a,i)};E(be,a=>{L(),n(()=>L().length>0)&&a(Ae)})}var Fe=o(be,2);{var Ge=a=>{var i=bt();f(a,i)},Se=a=>{var i=ft();ge(i,5,L,c=>c.id,(c,r)=>{const b=et(()=>(C(),e(r),n(()=>{var g;return((g=C().find(S=>S.id===e(r).id))==null?void 0:g.clause)||e(r).price})));var u=xt(),d=s(u);{var m=g=>{var S=pt();f(g,S)};E(d,g=>{R(),e(r),n(()=>R()===e(r).id)&&g(m)})}var w=o(d,2),$=s(w),p=s($),T=o(p,2),P=s(T,!0);t(T),t($);var x=o($,2),k=s(x),M=s(k,!0);t(k);var q=o(k,2),z=s(q);t(q),t(x),t(w);var A=o(w,2),V=s(A),F=o(s(V),2),Z=s(F,!0);t(F),t(V);var Q=o(V,2);Q.__click=()=>ve(C().find(g=>g.id===e(r).id));var W=o(s(Q),2),ee=s(W);ae(),t(W),t(Q),t(A);var te=o(A,2),G=s(te);G.__click=()=>qe(e(r).id);var D=s(G,!0);t(G);var le=o(G,2);le.__click=()=>Te(e(r).id),t(te),t(u),J((g,S)=>{I(p,"src",(e(r),n(()=>e(r).photoUrl||`https://ui-avatars.com/api/?name=${e(r).name}&background=random`))),I(p,"alt",(e(r),n(()=>e(r).name))),v(P,(e(r),n(()=>e(r).rating))),v(M,(e(r),n(()=>e(r).name))),v(z,`@${e(r),n(()=>e(r).username)??""}`),v(Z,g),v(ee,`${S??""} `),_e(G,1,`flex-1 px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all
									${R(),e(r),n(()=>R()===e(r).id?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-700/50 text-slate-400 hover:bg-slate-700 hover:text-white border border-transparent")??""}`),v(D,(R(),e(r),n(()=>R()===e(r).id?"Quitar C":"CapitÃ¡n")))},[()=>(e(r),n(()=>B(e(r).price))),()=>(Ze(e(b)),n(()=>B(e(b))))]),f(c,u)}),t(i),f(a,i)};E(Fe,a=>{L(),n(()=>L().length===0)?a(Ge):a(Se,!1)})}t(oe);var pe=o(oe,2),ne=s(pe),xe=o(s(ne),2),Be=s(xe);t(xe),t(ne);var Le=o(ne,2);{var Re=a=>{var i=_t(),c=s(i),r=s(c,!0);t(c);var b=o(c,2);{var u=d=>{var m=gt();f(d,m)};E(b,d=>{C(),n(()=>C().length===0)&&d(u)})}t(i),J(()=>v(r,(C(),n(()=>C().length===0?"No has fichado jugadores aÃºn.":"Todos tus jugadores estÃ¡n en la alineaciÃ³n titular.")))),f(a,i)},Ve=a=>{var i=wt();ge(i,5,()=>e(K),c=>c.id,(c,r)=>{var b=ht(),u=s(b),d=s(u),m=s(d),w=s(m,!0);t(m);var $=o(m,2),p=s($);t($),t(d);var T=o(d,2),P=s(T,!0);t(T),t(u);var x=o(u,2),k=o(s(x),2);k.__click=()=>ve(e(r));var M=s(k);t(k),t(x);var q=o(x,2),z=s(q);z.__click=()=>je(e(r).id);var A=o(z,2);A.__click=()=>Me(e(r)),t(q),t(b),J(V=>{v(w,(e(r),n(()=>e(r).name))),v(p,`@${e(r),n(()=>e(r).username)??""}`),v(P,(e(r),n(()=>e(r).rating))),v(M,`${V??""} âœ`),z.disabled=(N(),n(()=>N().length>=3))},[()=>(e(r),n(()=>B(e(r).clause)))]),f(c,b)}),t(i),f(a,i)};E(Le,a=>{e(K),n(()=>e(K).length===0)?a(Re):a(Ve,!1)})}t(pe),t(re);var Ee=o(re,2);st(Ee,{get isOpen(){return e(X)},title:"Blindar Jugador",onClose:()=>j(X,!1),children:(a,i)=>{var c=Qe(),r=de(c);{var b=u=>{var d=$t(),m=de(d),w=s(m),$=s(w);ae(2),t(w);var p=o(w,2),T=s(p,!0);t(p);var P=o(p,2),x=o(s(P)),k=s(x,!0);t(x),t(P),t(m);var M=o(m,2),q=s(M),z=o(s(q),2),A=s(z),V=s(A,!0);t(A);var F=o(A,2);at(F),I(F,"step",1e6);var Z=o(F,2),Q=s(Z,!0);t(Z),t(z);var W=o(z,2),ee=s(W),te=s(ee,!0);t(ee),t(W),t(q);var G=o(q,2),D=o(s(G),2),le=s(D);t(D),t(G);var g=o(G,4);g.__click=ye,t(M),J((S,Ie,Ne,Je,Ue)=>{I($,"src",(e(l),n(()=>e(l).photoUrl||`https://ui-avatars.com/api/?name=${e(l).name}`))),I($,"alt",(e(l),n(()=>e(l).name))),v(T,(e(l),n(()=>e(l).name))),v(k,S),v(V,Ie),I(F,"min",(e(l),n(()=>e(l).price))),I(F,"max",(e(l),n(()=>e(l).price*5))),v(Q,Ne),v(te,Je),_e(D,1,`font-bold font-mono ${e(O)>0?"text-red-400":"text-slate-500"}`),v(le,`-${Ue??""}`),g.disabled=e(O)===0},[()=>(e(l),n(()=>B(e(l).clause))),()=>(e(l),n(()=>B(e(l).price))),()=>(e(l),n(()=>B(e(l).price*5))),()=>(e(y),n(()=>B(e(y)))),()=>(e(O),n(()=>B(e(O))))]),rt(F,()=>e(y),S=>j(y,S)),f(u,d)};E(r,u=>{e(l)&&u(b)})}f(a,c)},$$slots:{default:!0}}),J(()=>{v(ze,`(${N(),n(()=>N().length)??""}/3)`),v(Be,`(${C(),n(()=>C().length)??""}/15)`)}),f($e,ue),Ke(),Ce()}Oe(["click"]);export{Bt as component};
