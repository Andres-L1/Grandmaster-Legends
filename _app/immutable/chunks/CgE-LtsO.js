import{Q as m,R as l,T as d}from"./I7kW3HN8.js";import{b as f,s as e,a as C}from"./iLhF7f-Y.js";function T(){const a=e.getCurrentTeam(),{subscribe:u,set:r,update:n}=l(a);return{subscribe:u,addToTeam:t=>{let s={success:!1,message:""};const c=d(C);return n(i=>{if(i.includes(t))return s={success:!1,message:"Jugador ya está en el equipo"},i;if(i.length>=3)return s={success:!1,message:"Equipo completo (máximo 3 jugadores)"},i;if(!c.includes(t))return s={success:!1,message:"Primero debes fichar a este jugador"},i;const o=[...i,t];return e.saveCurrentTeam(o),s={success:!0,message:"Jugador añadido al equipo"},o}),s},removeFromTeam:t=>{n(s=>{const c=s.filter(o=>o!==t);return e.saveCurrentTeam(c),e.getCaptain()===t&&e.saveCaptain(null),c})},setTeam:t=>{const s=t.slice(0,3);r(s),e.saveCurrentTeam(s)},reset:()=>{r([]),e.saveCurrentTeam([])}}}function p(){const a=e.getCaptain(),{subscribe:u,set:r}=l(a);return{subscribe:u,setCaptain:n=>n&&!e.getCurrentTeam().includes(n)?{success:!1,message:"El capitán debe estar en el equipo"}:(r(n),e.saveCaptain(n),{success:!0,message:n?"Capitán asignado":"Capitán eliminado"}),reset:()=>{r(null),e.saveCaptain(null)}}}const g=T(),q=p(),v=m(g,a=>a.length);m(v,a=>a>=3);const P=m([g,f],([a,u])=>u.filter(r=>a.includes(r.id)));export{q as a,g as c,P as t};
