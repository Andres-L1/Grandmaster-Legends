import{y as d,ak as u,al as S,am as v,an as U,ao as O,ap as E,aj as m}from"./CFNsvRdg.js";const C=Symbol("is custom element"),I=Symbol("is html");function T(e){if(d){var s=!1,r=()=>{if(!s){if(s=!0,e.hasAttribute("value")){var n=e.value;g(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var t=e.checked;g(e,"checked",null),e.checked=t}}};e.__on_r=r,v(r),U()}}function g(e,s,r,n){var t=L(e);d&&(t[s]=e.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&e.nodeName==="LINK")||t[s]!==(t[s]=r)&&(s==="loading"&&(e[O]=r),r==null?e.removeAttribute(s):typeof r!="string"&&p(e).includes(s)?e[s]=r:e.setAttribute(s,r))}function L(e){return e.__attributes??(e.__attributes={[C]:e.nodeName.includes("-"),[I]:e.namespaceURI===u})}var _=new Map;function p(e){var s=e.getAttribute("is")||e.nodeName,r=_.get(s);if(r)return r;_.set(s,r=[]);for(var n,t=e,a=Element.prototype;a!==t;){n=E(t);for(var o in n)n[o].set&&r.push(o);t=S(t)}return r}const c={USER:"gl_user",COLLECTION:"gl_collection"},l={username:"Rookie Collector",coins:1e3,seenOnboarding:!1};class N{getUser(){const s=localStorage.getItem(c.USER);if(s){const r=JSON.parse(s);return r.coins===void 0?l:r}return l}saveUser(s){localStorage.setItem(c.USER,JSON.stringify(s))}getCollection(){const s=localStorage.getItem(c.COLLECTION);return s?JSON.parse(s):[]}saveCollection(s){localStorage.setItem(c.COLLECTION,JSON.stringify(s))}resetAll(){localStorage.removeItem(c.USER),localStorage.removeItem(c.COLLECTION)}initialize(){localStorage.getItem(c.USER)||this.saveUser(l)}}const i=new N;i.initialize();function h(){const e=i.getUser(),{subscribe:s,set:r,update:n}=m(e);return{subscribe:s,addCoins:t=>{n(a=>{const o={...a,coins:a.coins+t};return i.saveUser(o),o})},spendCoins:t=>{let a=!1;return n(o=>{if(o.coins>=t){const f={...o,coins:o.coins-t};return i.saveUser(f),a=!0,f}return o}),a},setUsername:t=>{n(a=>{const o={...a,username:t};return i.saveUser(o),o})},completeOnboarding:()=>{n(t=>{const a={...t,seenOnboarding:!0};return i.saveUser(a),a})},reset:()=>{r({username:"Rookie Collector",coins:1e3,seenOnboarding:!1}),i.resetAll(),i.initialize()}}}const R=h();export{i as a,T as r,g as s,R as u};
