import{E as d,ak as u,al as S,am as v,an as U,ao as E,ap as O,aj as m}from"./BXTkSRxv.js";const C=Symbol("is custom element"),I=Symbol("is html");function T(e){if(d){var s=!1,r=()=>{if(!s){if(s=!0,e.hasAttribute("value")){var o=e.value;g(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var t=e.checked;g(e,"checked",null),e.checked=t}}};e.__on_r=r,v(r),U()}}function g(e,s,r,o){var t=L(e);d&&(t[s]=e.getAttribute(s),s==="src"||s==="srcset"||s==="href"&&e.nodeName==="LINK")||t[s]!==(t[s]=r)&&(s==="loading"&&(e[E]=r),r==null?e.removeAttribute(s):typeof r!="string"&&p(e).includes(s)?e[s]=r:e.setAttribute(s,r))}function L(e){return e.__attributes??(e.__attributes={[C]:e.nodeName.includes("-"),[I]:e.namespaceURI===u})}var _=new Map;function p(e){var s=e.getAttribute("is")||e.nodeName,r=_.get(s);if(r)return r;_.set(s,r=[]);for(var o,t=e,n=Element.prototype;n!==t;){o=O(t);for(var a in o)o[a].set&&r.push(a);t=S(t)}return r}const c={USER:"gl_user",COLLECTION:"gl_collection"},l={username:"Rookie Collector",coins:0,seenOnboarding:!1,lastDailyPackClaim:0};class N{getUser(){const s=localStorage.getItem(c.USER);if(s){const r=JSON.parse(s);return r.coins===void 0?l:r}return l}saveUser(s){localStorage.setItem(c.USER,JSON.stringify(s))}getCollection(){const s=localStorage.getItem(c.COLLECTION);return s?JSON.parse(s):[]}saveCollection(s){localStorage.setItem(c.COLLECTION,JSON.stringify(s))}resetAll(){localStorage.removeItem(c.USER),localStorage.removeItem(c.COLLECTION)}initialize(){localStorage.getItem(c.USER)||this.saveUser(l)}}const i=new N;i.initialize();function h(){const e=i.getUser(),{subscribe:s,set:r,update:o}=m(e);return{subscribe:s,update:o,addCoins:t=>{o(n=>{const a={...n,coins:n.coins+t};return i.saveUser(a),a})},spendCoins:t=>{let n=!1;return o(a=>{if(a.coins>=t){const f={...a,coins:a.coins-t};return i.saveUser(f),n=!0,f}return a}),n},setUsername:t=>{o(n=>{const a={...n,username:t};return i.saveUser(a),a})},completeOnboarding:()=>{o(t=>{const n={...t,seenOnboarding:!0};return i.saveUser(n),n})},reset:()=>{r({username:"Rookie Collector",coins:0,seenOnboarding:!1,lastDailyPackClaim:0}),i.resetAll(),i.initialize()}}}const k=h();export{i as a,T as r,g as s,k as u};
