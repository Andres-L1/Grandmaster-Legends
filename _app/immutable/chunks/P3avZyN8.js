var Z=Object.defineProperty;var k=a=>{throw TypeError(a)};var $=(a,e,t)=>e in a?Z(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var N=(a,e,t)=>$(a,typeof e!="symbol"?e+"":e,t),w=(a,e,t)=>e.has(a)||k("Cannot "+t);var s=(a,e,t)=>(w(a,e,"read from private field"),t?t.call(a):e.get(a)),v=(a,e,t)=>e.has(a)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),B=(a,e,t,r)=>(w(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t);import{z as Y,L as G,M as I,N as H,O as x,P as F,y,Q,R as V,S as W,T as X,U as j,V as J,W as K,X as ee,Y as te,Z as ae,_ as U,a0 as se,a1 as re,a2 as ie,q as O,a3 as ne,k as fe,a4 as ce,a5 as de,a6 as he,d as ue,a7 as _e,a8 as oe,a9 as le,aa as ve,ab as be,f as me,I as Se,ac as ge,ad as Pe}from"./DcEHMtQ0.js";import{c as pe}from"./CB7BY2uZ.js";var _,o,u,b,p,A,R;class Ae{constructor(e,t=!0){N(this,"anchor");v(this,_,new Map);v(this,o,new Map);v(this,u,new Map);v(this,b,new Set);v(this,p,!0);v(this,A,()=>{var e=Y;if(s(this,_).has(e)){var t=s(this,_).get(e),r=s(this,o).get(t);if(r)G(r),s(this,b).delete(t);else{var c=s(this,u).get(t);c&&(s(this,o).set(t,c.effect),s(this,u).delete(t),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),r=c.effect)}for(const[i,f]of s(this,_)){if(s(this,_).delete(i),i===e)break;const n=s(this,u).get(f);n&&(I(n.effect),s(this,u).delete(f))}for(const[i,f]of s(this,o)){if(i===t||s(this,b).has(i))continue;const n=()=>{if(Array.from(s(this,_).values()).includes(i)){var l=document.createDocumentFragment();V(f,l),l.append(x()),s(this,u).set(i,{effect:f,fragment:l})}else I(f);s(this,b).delete(i),s(this,o).delete(i)};s(this,p)||!r?(s(this,b).add(i),H(f,n,!1)):n()}}});v(this,R,e=>{s(this,_).delete(e);const t=Array.from(s(this,_).values());for(const[r,c]of s(this,u))t.includes(r)||(I(c.effect),s(this,u).delete(r))});this.anchor=e,B(this,p,t)}ensure(e,t){var r=Y,c=W();if(t&&!s(this,o).has(e)&&!s(this,u).has(e))if(c){var i=document.createDocumentFragment(),f=x();i.append(f),s(this,u).set(e,{effect:F(()=>t(f)),fragment:i})}else s(this,o).set(e,F(()=>t(this.anchor)));if(s(this,_).set(r,e),c){for(const[n,d]of s(this,o))n===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[n,d]of s(this,u))n===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(s(this,A)),r.ondiscard(s(this,R))}else y&&(this.anchor=Q),s(this,A).call(this)}}_=new WeakMap,o=new WeakMap,u=new WeakMap,b=new WeakMap,p=new WeakMap,A=new WeakMap,R=new WeakMap;function Ie(a,e,t=!1){y&&j();var r=new Ae(a),c=t?J:0;function i(f,n){if(y){const l=K(a)===ee;if(f===l){var d=te();ae(d),r.anchor=d,U(!1),r.ensure(f,n),U(!0);return}}r.ensure(f,n)}X(()=>{var f=!1;e((n,d=!0)=>{f=!0,i(d,n)}),f||i(!1,null)},c)}function Oe(a,e,t,r){var L;var c=!ue||(t&_e)!==0,i=(t&oe)!==0,f=(t&Pe)!==0,n=r,d=!0,l=()=>(d&&(d=!1,n=f?me(r):r),n),S;if(i){var C=ve in a||be in a;S=((L=se(a,e))==null?void 0:L.set)??(C&&e in a?h=>a[e]=h:void 0)}var g,D=!1;i?[g,D]=pe(()=>a[e]):g=a[e],g===void 0&&r!==void 0&&(g=l(),S&&(c&&re(),S(g)));var m;if(c?m=()=>{var h=a[e];return h===void 0?l():(d=!0,h)}:m=()=>{var h=a[e];return h!==void 0&&(n=void 0),h===void 0?n:h},c&&!(t&ie))return m;if(S){var q=a.$$legacy;return function(h,E){return arguments.length>0?((!c||!E||q||D)&&S(E?m():h),h):m()}}var T=!1,P=(t&ge?Se:he)(()=>(T=!1,m()));i&&O(P);var z=ce;return function(h,E){if(arguments.length>0){const M=E?O(P):c&&i?ne(h):h;return fe(P,M),T=!0,n!==void 0&&(n=M),h}return le&&T||z.f&de?P.v:O(P)}}export{Ae as B,Ie as i,Oe as p};
